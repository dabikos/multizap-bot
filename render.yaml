services:
  - type: web
    name: multizap-web
    env: node
    plan: free
    buildCommand: npm ci --include=dev && npm run compile
    startCommand: npm run web
    autoDeploy: true
    healthCheckPath: /
    envVars:
      - key: NODE_ENV
        value: production
      - key: NPM_CONFIG_PRODUCTION
        value: "false"
      - key: RPC_URL
        sync: false
      - key: CHAIN_ID
        sync: false
      - key: ROUTER_ADDRESS
        sync: false
      - key: FACTORY_ADDRESS
        sync: false
      # Multichain support
      - key: ETH_RPC_URL
        sync: false
      - key: BSC_RPC_URL
        sync: false
      - key: BASE_RPC_URL
        sync: false
      - key: ETH_ROUTER_ADDRESS
        sync: false
      - key: BSC_ROUTER_ADDRESS
        sync: false
      - key: BASE_ROUTER_ADDRESS
        sync: false
      - key: ETH_FACTORY_ADDRESS
        sync: false
      - key: BSC_FACTORY_ADDRESS
        sync: false
      - key: BASE_FACTORY_ADDRESS
        sync: false
      - key: TELEGRAM_BOT_TOKEN
        sync: false
      - key: PRIVATE_KEY
        sync: false

  - type: worker
    name: multizap-bot
    env: node
    plan: free
    buildCommand: npm ci --include=dev && npm run compile
    startCommand: npm run bot
    autoDeploy: true
    envVars:
      - key: NODE_ENV
        value: production
      - key: NPM_CONFIG_PRODUCTION
        value: "false"
      - key: RPC_URL
        sync: false
      - key: CHAIN_ID
        sync: false
      - key: ROUTER_ADDRESS
        sync: false
      - key: FACTORY_ADDRESS
        sync: false
      # Multichain support
      - key: ETH_RPC_URL
        sync: false
      - key: BSC_RPC_URL
        sync: false
      - key: BASE_RPC_URL
        sync: false
      - key: ETH_ROUTER_ADDRESS
        sync: false
      - key: BSC_ROUTER_ADDRESS
        sync: false
      - key: BASE_ROUTER_ADDRESS
        sync: false
      - key: ETH_FACTORY_ADDRESS
        sync: false
      - key: BSC_FACTORY_ADDRESS
        sync: false
      - key: BASE_FACTORY_ADDRESS
        sync: false
      - key: TELEGRAM_BOT_TOKEN
        sync: false
      - key: PRIVATE_KEY
        sync: false

